<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced JavaScript Showcase</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        .gradient-bg {
            background: linear-gradient(90deg, #4b6cb7 0%, #182848 100%);
        }
    </style>
</head>
<body class="bg-gray-100 font-sans">
    <header class="gradient-bg text-white py-6">
        <div class="container mx-auto px-4">
            <h1 class="text-3xl font-bold">Advanced JavaScript Showcase</h1>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- Calculator Section -->
            <section class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-2xl font-semibold mb-4">Promise Calculator</h2>
                <div class="space-y-4">
                    <div class="flex space-x-2">
                        <input type="number" id="num1" placeholder="Number 1" class="border rounded px-2 py-1 w-full">
                        <select id="operation" class="border rounded px-2 py-1">
                            <option value="+">+</option>
                            <option value="-">-</option>
                            <option value="*">*</option>
                            <option value="/">/</option>
                        </select>
                        <input type="number" id="num2" placeholder="Number 2" class="border rounded px-2 py-1 w-full">
                    </div>
                    <button id="calculateBtn" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 w-full">Calculate</button>
                    <div id="calculatorResult" class="text-lg font-semibold"></div>
                </div>
            </section>

            <!-- Square Iterator Section -->
            <section class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-2xl font-semibold mb-4">Square Iterator</h2>
                <div class="space-y-4">
                    <input type="text" id="numbers" placeholder="Enter numbers (comma-separated)" class="border rounded px-2 py-1 w-full">
                    <button id="iterateBtn" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600 w-full">Generate Squares</button>
                    <div id="squaresResult" class="text-lg"></div>
                </div>
            </section>

            <!-- Prime Generator Section -->
            <section class="bg-white rounded-lg shadow-md p-6">
                <h2 class="text-2xl font-semibold mb-4">Prime Number Generator</h2>
                <div class="space-y-4">
                    <input type="number" id="primeLimit" placeholder="Enter upper limit" class="border rounded px-2 py-1 w-full">
                    <button id="generatePrimesBtn" class="bg-purple-500 text-white px-4 py-2 rounded hover:bg-purple-600 w-full">Generate Primes</button>
                    <div id="primesResult" class="text-lg"></div>
                </div>
            </section>
        </div>
    </main>

    <script>
        // Calculator using Promises
        function calculator(num1, num2, operation) {
            return new Promise((resolve, reject) => {
                if (isNaN(num1) || isNaN(num2)) {
                    reject('Invalid input: Both inputs must be numbers');
                }

                switch (operation) {
                    case '+':
                        resolve(num1 + num2);
                        break;
                    case '-':
                        resolve(num1 - num2);
                        break;
                    case '*':
                        resolve(num1 * num2);
                        break;
                    case '/':
                        if (num2 === 0) {
                            reject('Division by zero is not allowed');
                        } else {
                            resolve(num1 / num2);
                        }
                        break;
                    default:
                        reject('Invalid operation');
                }
            });
        }

        document.getElementById('calculateBtn').addEventListener('click', () => {
            const num1 = parseFloat(document.getElementById('num1').value);
            const num2 = parseFloat(document.getElementById('num2').value);
            const operation = document.getElementById('operation').value;

            calculator(num1, num2, operation)
                .then(result => {
                    document.getElementById('calculatorResult').textContent = `Result: ${result}`;
                })
                .catch(error => {
                    document.getElementById('calculatorResult').textContent = `Error: ${error}`;
                });
        });

        // Custom Iterator for Squares
        class SquareIterator {
            constructor(arr) {
                this.arr = arr;
                this.index = 0;
            }

            next() {
                if (this.index < this.arr.length) {
                    const value = this.arr[this.index] ** 2;
                    this.index++;
                    return { value, done: false };
                } else {
                    return { done: true };
                }
            }

            [Symbol.iterator]() {
                return this;
            }
        }

        document.getElementById('iterateBtn').addEventListener('click', () => {
            const input = document.getElementById('numbers').value;
            const numbers = input.split(',').map(num => parseFloat(num.trim())).filter(num => !isNaN(num));

            const squareIterator = new SquareIterator(numbers);
            let result = 'Squares: ';

            for (const square of squareIterator) {
                result += square + ', ';
            }

            document.getElementById('squaresResult').textContent = result.slice(0, -2);
        });

        // Prime Number Generator
        function* generatePrimes(limit) {
            function isPrime(num) {
                for (let i = 2; i <= Math.sqrt(num); i++) {
                    if (num % i === 0) return false;
                }
                return num > 1;
            }

            for (let num = 2; num <= limit; num++) {
                if (isPrime(num)) {
                    yield num;
                }
            }
        }

        document.getElementById('generatePrimesBtn').addEventListener('click', () => {
            const limit = parseInt(document.getElementById('primeLimit').value);
            const primeGenerator = generatePrimes(limit);
            let result = 'Prime numbers: ';

            for (const prime of primeGenerator) {
                result += prime + ', ';
            }

            document.getElementById('primesResult').textContent = result.slice(0, -2);
        });
    </script>
</body>
</html>
